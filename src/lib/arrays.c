#include "arrays.h"
#include <string.h>

/* Predefined arrays (const static data) */

static const int L4_data[] = {
    0, 0, 0,
    0, 1, 1,
    1, 0, 1,
    1, 1, 0
};

static const int L8_data[] = {
    0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 1, 1, 1, 1,
    0, 1, 1, 0, 0, 1, 1,
    0, 1, 1, 1, 1, 0, 0,
    1, 0, 1, 0, 1, 0, 1,
    1, 0, 1, 1, 0, 1, 0,
    1, 1, 0, 0, 1, 1, 0,
    1, 1, 0, 1, 0, 0, 1
};

static const int L9_data[] = {
    0, 0, 0, 0,
    0, 1, 1, 1,
    0, 2, 2, 2,
    1, 0, 1, 2,
    1, 1, 2, 0,
    1, 2, 0, 1,
    2, 0, 2, 1,
    2, 1, 0, 2,
    2, 2, 1, 0
};

static const int L16_data[] = {
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,
    0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1,
    0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
    0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1,
    0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0,
    0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0,
    0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1,
    1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1,
    1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0,
    1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0,
    1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1,
    1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0,
    1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1,
    1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1,
    1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0
};

static const int L27_data[] = {
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2,
    0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 2, 2, 2,
    0, 1, 1, 1, 1, 1, 1, 2, 2, 2, 0, 0, 0,
    0, 1, 1, 1, 2, 2, 2, 0, 0, 0, 1, 1, 1,
    0, 2, 2, 2, 0, 0, 0, 2, 2, 2, 1, 1, 1,
    0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 2, 2, 2,
    0, 2, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0,
    1, 0, 1, 2, 0, 1, 2, 0, 1, 2, 0, 1, 2,
    1, 0, 1, 2, 1, 2, 0, 1, 2, 0, 2, 0, 1,
    1, 0, 1, 2, 2, 0, 1, 2, 0, 1, 1, 2, 0,
    1, 1, 2, 0, 0, 1, 2, 1, 2, 0, 2, 0, 1,
    1, 1, 2, 0, 1, 2, 0, 2, 0, 1, 1, 2, 0,
    1, 1, 2, 0, 2, 0, 1, 0, 1, 2, 0, 1, 2,
    1, 2, 0, 1, 0, 1, 2, 2, 0, 1, 1, 2, 0,
    1, 2, 0, 1, 1, 2, 0, 0, 1, 2, 2, 0, 1,
    1, 2, 0, 1, 2, 0, 1, 1, 2, 0, 0, 1, 2,
    2, 0, 2, 1, 0, 2, 1, 0, 2, 1, 0, 2, 1,
    2, 0, 2, 1, 1, 0, 2, 1, 0, 2, 2, 1, 0,
    2, 0, 2, 1, 2, 1, 0, 2, 1, 0, 1, 0, 2,
    2, 1, 0, 2, 0, 2, 1, 1, 0, 2, 2, 1, 0,
    2, 1, 0, 2, 1, 0, 2, 2, 1, 0, 1, 0, 2,
    2, 1, 0, 2, 2, 1, 0, 0, 2, 1, 0, 2, 1,
    2, 2, 1, 0, 0, 2, 1, 2, 1, 0, 1, 0, 2,
    2, 2, 1, 0, 1, 0, 2, 0, 2, 1, 2, 1, 0,
    2, 2, 1, 0, 2, 1, 0, 1, 0, 2, 0, 2, 1
};


static const OrthogonalArray all_arrays[] = {
    { "L4", 4, 3, 2, L4_data },
    { "L8", 8, 7, 2, L8_data },
    { "L9", 9, 4, 3, L9_data },
    { "L16", 16, 15, 2, L16_data },
    { "L27", 27, 13, 3, L27_data }
};

static const char *array_names[] = {
    "L4",
    "L8",
    "L9",
    "L16",
    "L27",
    NULL
};

const OrthogonalArray *get_array(const char *name) {
    if (name == NULL) {
        return NULL;
    }
    for (size_t i = 0; i < sizeof(all_arrays) / sizeof(all_arrays[0]); i++) {
        if (strcmp(name, all_arrays[i].name) == 0) {
            return &all_arrays[i];
        }
    }
    return NULL;
}

const char **list_array_names(void) {
    return array_names;
}
